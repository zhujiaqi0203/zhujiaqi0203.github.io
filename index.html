<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>编程社团文件收发系统</title>
  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1e40af',
            secondary: '#3b82f6',
            accent: '#60a5fa',
            neutral: '#f3f4f6',
            'neutral-dark': '#9ca3af',
            danger: '#ef4444',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .bg-gradient-tech {
        background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      }
      .border-glow {
        box-shadow: 0 0 5px theme('colors.accent');
      }
      .transition-all-300 {
        transition: all 300ms ease-in-out;
      }
    }
    
    /* 自定义样式 */
    .file-drop-area {
      border: 2px dashed theme('colors.neutral-dark');
      transition: all 0.3s ease;
    }
    
    .file-drop-area.active {
      border-color: theme('colors.secondary');
      background-color: rgba(59, 130, 246, 0.05);
    }
    
    .file-progress-bar {
      height: 4px;
      background-color: theme('colors.neutral');
      border-radius: 2px;
      overflow: hidden;
    }
    
    .file-progress-bar-fill {
      height: 100%;
      background-color: theme('colors.secondary');
      border-radius: 2px;
      transition: width 0.3s ease;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 50;
      justify-content: center;
      align-items: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 400px;
      animation: modalFadeIn 0.3s ease;
    }
    
    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .file-item {
      transition: all 0.3s ease;
    }
    
    .file-item:hover {
      background-color: rgba(59, 130, 246, 0.05);
    }
    
    .btn {
      transition: all 0.2s ease;
    }
    
    .btn:hover {
      transform: translateY(-2px);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    /* 骨架屏样式 */
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite;
    }
    
    @keyframes skeleton-loading {
      0% {
        background-position: 200% 0;
      }
      100% {
        background-position: -200% 0;
      }
    }
    
    /* 移动端适配 */
    @media (max-width: 640px) {
      .file-list-header, .file-item {
        grid-template-columns: 1fr auto;
      }
      
      .file-item-actions {
        grid-column: 2;
        grid-row: 1;
      }
      
      .file-item-info {
        grid-column: 1;
        grid-row: 2;
      }
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- 顶部导航栏 -->
  <header class="bg-gradient-tech text-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/8f4473aa0efe40a28c83768bce051722~tplv-a9rns2rl98-image.image?rcl=20251025144726220221C3E08227897BA9&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1763966877&x-signature=eJTeKje1KVpNktgppOJUXn2oDwc%3D" alt="Logo" class="h-10 w-10">
        <h1 class="text-xl font-bold text-shadow">编程社团文件收发系统</h1>
      </div>
      <div class="flex items-center space-x-4">
        <button id="admin-mode-toggle" class="px-3 py-1 rounded-full bg-white/20 hover:bg-white/30 transition-all-300 text-sm">
          <i class="fa fa-user-circle mr-1"></i> 管理员模式
        </button>
      </div>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="container mx-auto px-4 py-6">
    <!-- 状态提示区 -->
    <div id="status-message" class="mb-6 p-4 rounded-lg hidden">
      <div class="flex items-center">
        <i id="status-icon" class="fa fa-info-circle mr-2"></i>
        <span id="status-text"></span>
      </div>
    </div>

    <!-- 文件列表区 -->
    <section id="file-list-section" class="mb-8">
      <div class="bg-white rounded-lg shadow-md p-4">
        <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
          <i class="fa fa-file-text-o mr-2 text-primary"></i> 文件列表
        </h2>
        
        <!-- 文件列表头部 -->
        <div class="file-list-header grid grid-cols-3 md:grid-cols-4 gap-4 mb-3 text-sm font-medium text-gray-500 border-b pb-2">
          <div>文件名</div>
          <div class="hidden md:block">大小</div>
          <div class="hidden md:block">上传时间</div>
          <div class="text-right">操作</div>
        </div>
        
        <!-- 文件列表容器 -->
        <div id="file-list-container" class="space-y-3 max-h-[500px] overflow-y-auto pr-2">
          <!-- 文件列表将通过JavaScript动态生成 -->
          <div id="empty-file-message" class="text-center py-8 text-gray-500">
            <i class="fa fa-folder-open-o text-4xl mb-3"></i>
            <p>暂无文件，请上传文件</p>
          </div>
          
          <!-- 加载骨架屏 -->
          <div id="loading-skeleton" class="hidden">
            <div class="skeleton h-12 rounded mb-3"></div>
            <div class="skeleton h-12 rounded mb-3"></div>
            <div class="skeleton h-12 rounded"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- 文件上传区 -->
    <section id="file-upload-section" class="mb-8">
      <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
          <i class="fa fa-upload mr-2 text-primary"></i> 文件上传
        </h2>
        
        <!-- 文件拖放区域 -->
        <div id="file-drop-area" class="file-drop-area rounded-lg p-8 text-center cursor-pointer mb-4">
          <img src="https://p11-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1982641231239053320~tplv-be4g95zd3a-image.jpeg?rk3s=542c0f93&x-expires=1776926859&x-signature=Q2IV2cfXRN89J8IRARrUbKnv8To%3D" alt="Upload" class="h-16 w-16 mx-auto mb-3 opacity-70">
          <p class="text-gray-600 mb-2">拖拽文件到此处或</p>
          <label class="btn px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 cursor-pointer inline-flex items-center">
            <i class="fa fa-folder-open mr-2"></i> 选择文件
            <input type="file" id="file-input" class="hidden" multiple>
          </label>
          <p class="text-xs text-gray-500 mt-2">支持任意类型文件，单个文件不超过100MB</p>
        </div>
        
        <!-- 上传文件列表 -->
        <div id="upload-files-list" class="space-y-2 max-h-[300px] overflow-y-auto pr-2">
          <!-- 上传文件列表将通过JavaScript动态生成 -->
        </div>
      </div>
    </section>
  </main>

  <!-- 底部信息 -->
  <footer class="bg-gray-800 text-white py-4">
    <div class="container mx-auto px-4 text-center text-sm">
      <p>© 2025 编程社团文件收发系统 | 无需登录即可上传文件，下载需密码</p>
    </div>
  </footer>

  <!-- 密码输入模态框 -->
  <div id="password-modal" class="modal">
    <div class="modal-content p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-gray-800" id="modal-title">输入密码</h3>
        <button id="close-modal" class="text-gray-500 hover:text-gray-700">
          <i class="fa fa-times"></i>
        </button>
      </div>
      
      <p class="text-gray-600 mb-4" id="modal-message">请输入密码以继续操作</p>
      
      <div class="mb-4">
        <input type="password" id="password-input" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="请输入密码">
      </div>
      
      <div class="flex justify-end space-x-3">
        <button id="cancel-password" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">取消</button>
        <button id="confirm-password" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90">确认</button>
      </div>
    </div>
  </div>

  <!-- 文件清除确认模态框 -->
  <div id="confirm-modal" class="modal">
    <div class="modal-content p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-gray-800">确认清除</h3>
        <button id="close-confirm-modal" class="text-gray-500 hover:text-gray-700">
          <i class="fa fa-times"></i>
        </button>
      </div>
      
      <p class="text-gray-600 mb-4">确定要清除所有文件吗？此操作不可恢复。</p>
      
      <div class="flex justify-end space-x-3">
        <button id="cancel-clear" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">取消</button>
        <button id="confirm-clear" class="px-4 py-2 bg-danger text-white rounded-md hover:bg-danger/90">确认清除</button>
      </div>
    </div>
  </div>

  <script>
    // 全局变量
    const PASSWORD = '20130203';
    let files = [];
    let currentFileId = null;
    let currentAction = null; // 'download' 或 'delete'
    let adminMode = false;
    
    // DOM 元素
    const fileDropArea = document.getElementById('file-drop-area');
    const fileInput = document.getElementById('file-input');
    const uploadFilesList = document.getElementById('upload-files-list');
    const fileListContainer = document.getElementById('file-list-container');
    const emptyFileMessage = document.getElementById('empty-file-message');
    const loadingSkeleton = document.getElementById('loading-skeleton');
    const statusMessage = document.getElementById('status-message');
    const statusIcon = document.getElementById('status-icon');
    const statusText = document.getElementById('status-text');
    const passwordModal = document.getElementById('password-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalMessage = document.getElementById('modal-message');
    const passwordInput = document.getElementById('password-input');
    const closeModal = document.getElementById('close-modal');
    const cancelPassword = document.getElementById('cancel-password');
    const confirmPassword = document.getElementById('confirm-password');
    const confirmModal = document.getElementById('confirm-modal');
    const closeConfirmModal = document.getElementById('close-confirm-modal');
    const cancelClear = document.getElementById('cancel-clear');
    const confirmClear = document.getElementById('confirm-clear');
    const adminModeToggle = document.getElementById('admin-mode-toggle');
    
    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
      // 从本地存储加载文件
      loadFilesFromLocalStorage();
      
      // 渲染文件列表
      renderFileList();
      
      // 设置事件监听器
      setupEventListeners();
    });
    
    // 从本地存储加载文件
    function loadFilesFromLocalStorage() {
      const storedFiles = localStorage.getItem('sharedFiles');
      if (storedFiles) {
        files = JSON.parse(storedFiles);
      }
    }
    
    // 保存文件到本地存储
    function saveFilesToLocalStorage() {
      localStorage.setItem('sharedFiles', JSON.stringify(files));
    }
    
    // 设置事件监听器
    function setupEventListeners() {
      // 文件拖放区域事件
      fileDropArea.addEventListener('click', () => fileInput.click());
      fileDropArea.addEventListener('dragover', handleDragOver);
      fileDropArea.addEventListener('dragleave', handleDragLeave);
      fileDropArea.addEventListener('drop', handleDrop);
      
      // 文件输入事件
      fileInput.addEventListener('change', handleFileSelect);
      
      // 密码模态框事件
      closeModal.addEventListener('click', closePasswordModal);
      cancelPassword.addEventListener('click', closePasswordModal);
      confirmPassword.addEventListener('click', handlePasswordSubmit);
      
      // 确认清除模态框事件
      closeConfirmModal.addEventListener('click', closeConfirmModal);
      cancelClear.addEventListener('click', closeConfirmModal);
      confirmClear.addEventListener('click', handleClearConfirmation);
      
      // 管理员模式切换
      adminModeToggle.addEventListener('click', toggleAdminMode);
    }
    
    // 处理拖拽经过
    function handleDragOver(e) {
      e.preventDefault();
      fileDropArea.classList.add('active');
    }
    
    // 处理拖拽离开
    function handleDragLeave(e) {
      e.preventDefault();
      if (!fileDropArea.contains(e.relatedTarget)) {
        fileDropArea.classList.remove('active');
      }
    }
    
    // 处理拖拽放置
    function handleDrop(e) {
      e.preventDefault();
      fileDropArea.classList.remove('active');
      
      if (e.dataTransfer.files.length > 0) {
        handleFiles(e.dataTransfer.files);
      }
    }
    
    // 处理文件选择
    function handleFileSelect(e) {
      if (e.target.files.length > 0) {
        handleFiles(e.target.files);
      }
    }
    
    // 处理文件
    function handleFiles(selectedFiles) {
      // 检查文件大小
      for (const file of selectedFiles) {
        if (file.size > 100 * 1024 * 1024) { // 100MB
          showStatus('error', `文件 "${file.name}" 太大，最大支持100MB`);
          continue;
        }
        
        // 创建文件对象
        const fileId = generateUniqueId();
        const newFile = {
          id: fileId,
          name: file.name,
          size: file.size,
          type: file.type,
          uploadTime: new Date().toISOString(),
          dataUrl: null
        };
        
        // 显示上传进度
        const uploadItem = createUploadItem(newFile);
        uploadFilesList.appendChild(uploadItem);
        
        // 读取文件
        const reader = new FileReader();
        
        reader.onprogress = (e) => {
          if (e.lengthComputable) {
            const progress = (e.loaded / e.total) * 100;
            const progressBar = uploadItem.querySelector('.file-progress-bar-fill');
            progressBar.style.width = `${progress}%`;
          }
        };
        
        reader.onload = (e) => {
          newFile.dataUrl = e.target.result;
          
          // 添加到文件列表
          files.push(newFile);
          
          // 保存到本地存储
          saveFilesToLocalStorage();
          
          // 更新文件列表
          renderFileList();
          
          // 显示成功消息
          showStatus('success', `文件 "${file.name}" 上传成功`);
          
          // 移除上传项
          setTimeout(() => {
            uploadItem.remove();
          }, 1000);
        };
        
        reader.onerror = () => {
          showStatus('error', `文件 "${file.name}" 上传失败`);
          uploadItem.remove();
        };
        
        reader.readAsDataURL(file);
      }
    }
    
    // 创建上传项
    function createUploadItem(file) {
      const uploadItem = document.createElement('div');
      uploadItem.className = 'bg-gray-50 rounded-md p-3 flex items-center';
      uploadItem.innerHTML = `
        <div class="flex-1">
          <div class="flex items-center">
            <i class="fa fa-file-o text-primary mr-2"></i>
            <span class="text-sm font-medium">${file.name}</span>
          </div>
          <div class="file-progress-bar mt-2">
            <div class="file-progress-bar-fill" style="width: 0%"></div>
          </div>
        </div>
        <div class="text-sm text-gray-500 ml-3">
          ${formatFileSize(file.size)}
        </div>
      `;
      return uploadItem;
    }
    
    // 渲染文件列表
    function renderFileList() {
      // 显示骨架屏
      loadingSkeleton.classList.remove('hidden');
      emptyFileMessage.classList.add('hidden');
      
      // 清空文件列表
      while (fileListContainer.firstChild) {
        if (fileListContainer.firstChild !== emptyFileMessage && fileListContainer.firstChild !== loadingSkeleton) {
          fileListContainer.removeChild(fileListContainer.firstChild);
        } else {
          break;
        }
      }
      
      // 模拟加载延迟
      setTimeout(() => {
        // 隐藏骨架屏
        loadingSkeleton.classList.add('hidden');
        
        // 检查是否有文件
        if (files.length === 0) {
          emptyFileMessage.classList.remove('hidden');
          return;
        }
        
        // 渲染文件列表
        files.forEach(file => {
          const fileItem = createFileItem(file);
          fileListContainer.appendChild(fileItem);
        });
        
        // 如果是管理员模式，添加清除所有按钮
        if (adminMode) {
          const clearAllButton = document.createElement('div');
          clearAllButton.className = 'mt-4 text-center';
          clearAllButton.innerHTML = `
            <button id="clear-all-files" class="px-4 py-2 bg-danger text-white rounded-md hover:bg-danger/90 btn">
              <i class="fa fa-trash mr-2"></i> 清除所有文件
            </button>
          `;
          fileListContainer.appendChild(clearAllButton);
          
          // 添加清除所有按钮事件
          document.getElementById('clear-all-files').addEventListener('click', showClearConfirmModal);
        }
      }, 500);
    }
    
    // 创建文件项
    function createFileItem(file) {
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item rounded-md p-3 flex items-center justify-between';
      
      // 获取文件图标
      const fileIcon = getFileIcon(file.type);
      
      // 格式化上传时间
      const formattedDate = formatDate(file.uploadTime);
      
      // 构建文件项HTML
      fileItem.innerHTML = `
        <div class="flex items-center">
          <div class="text-primary mr-3">${fileIcon}</div>
          <div>
            <div class="font-medium">${file.name}</div>
            <div class="file-item-info text-xs text-gray-500 mt-1">
              <span class="hidden md:inline">${formatFileSize(file.size)} · </span>
              <span>${formattedDate}</span>
            </div>
          </div>
        </div>
        <div class="file-item-actions flex space-x-2">
          <button class="download-file px-3 py-1 bg-secondary text-white rounded hover:bg-secondary/90 btn" data-id="${file.id}">
            <i class="fa fa-download mr-1"></i> 下载
          </button>
          ${adminMode ? `
            <button class="delete-file px-3 py-1 bg-danger text-white rounded hover:bg-danger/90 btn" data-id="${file.id}">
              <i class="fa fa-trash mr-1"></i> 删除
            </button>
          ` : ''}
        </div>
      `;
      
      // 添加 event listeners
      if (fileItem.querySelector('.('.download-file')) {
        fileItem.querySelector('.download-file').addEventListener('click', () => {
          showPasswordModal('download', file.id);
        });
      }
      
      if (adminMode && fileItem.querySelector('.delete-file')) {
        fileItem.querySelector('.delete-file').addEventListener('click', () => {
          showPasswordModal('delete', file.id);
        });
      }
      
      return fileItem;
    }
    
    // 获取文件图标
    function getFileIcon(fileType) {
      if (fileType.startsWith('image/')) {
        return '<i class="fa fa-file-image-o text-2xl"></i>';
      } else if (fileType.startsWith('video/')) {
        return '<i class="fa fa-file-video-o text-2xl"></i>';
      } else if (fileType.startsWith('audio/')) {
        return '<i class="fa fa-file-audio-o text-2xl"></i>';
      } else if (fileType.includes('pdf')) {
        return '<i class="fa fa-file-pdf-o text-2xl"></i>';
      } else if (fileType.includes('word') || fileType.includes('doc')) {
        return '<i class="fa fa-file-word-o text-2xl"></i>';
      } else if (fileType.includes('excel') || fileType.includes('spreadsheet')) {
        return '<i class="fa fa-file-excel-o text-2xl"></i>';
      } else if (fileType.includes('powerpoint') || fileType.includes('presentation')) {
        return '<i class="fa fa-file-powerpoint-o text-2xl"></i>';
      } else if (fileType.includes('text') || fileType.includes('plain')) {
        return '<i class="fa fa-file-text-o text-2xl"></i>';
      } else if (fileType.includes('zip') || fileType.includes('compressed')) {
        return '<i class="fa fa-file-zip-o text-2xl"></i>';
      } else {
        return '<i class="fa fa-file-o text-2xl"></i>';
      }
    }
    
    // 格式化文件大小
    function formatFileSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
      else return (bytes / 1048576).toFixed(1) + ' MB';
    }
    
    // 格式化日期
    function formatDate(dateString) {
      const date = new Date(dateString);
      return `${date.getFullYear()}-${padZero(date.getMonth() + 1)}-${padZero(date.getDate())} ${padZero(date.getHours())}:${padZero(date.getMinutes())}`;
    }
    
    // 数字补零
    function padZero(num) {
      return num.toString().padStart(2, '0');
    }
    
    // 生成唯一ID
    function generateUniqueId() {
      return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
    }
    
    // 显示状态消息
    function showStatus(type, message) {
      statusMessage.className = `mb-6 p-4 rounded-lg ${type === 'success' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`;
      statusIcon.className = `fa ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} mr-2`;
      statusText.textContent = message;
      statusMessage.classList.remove('hidden');
      
      // 3秒后自动隐藏
      setTimeout(() => {
        statusMessage.classList.add('hidden');
      }, 3000);
    }
    
    // 显示密码模态框
    function showPasswordModal(action, fileId) {
      currentAction = action;
      currentFileId = fileId;
      
      if (action === 'download') {
        modalTitle.textContent = '下载文件';
        modalMessage.textContent = '请输入密码以下载文件';
      } else if (action === 'delete') {
        modalTitle.textContent = '删除文件';
        modalMessage.textContent = '请输入密码以删除文件';
      }
      
      passwordInput.value = '';
      passwordModal.classList.add('active');
      passwordInput.focus();
    }
    
    // 关闭密码模态框
    function closePasswordModal() {
      passwordModal.classList.remove('active');
      currentFileId = null;
      currentAction = null;
    }
    
    // 处理密码提交
    function handlePasswordSubmit() {
      const password = passwordInput.value.trim();
      
      if (password === PASSWORD) {
        if (currentAction === 'download') {
          downloadFile(currentFileId);
        } else if (currentAction === 'delete') {
          deleteFile(currentFileId);
        }
        closePasswordModal();
      } else {
        showStatus('error', '密码错误，请重试');
      }
    }
    
    // 下载文件
    function downloadFile(fileId) {
      const file = files.find(f => f.id === fileId);
      
      if (file && file.dataUrl) {
        try {
          const link = document.createElement('a');
          link.href = file.dataUrl;
          link.download = file.name;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          
          showStatus('success', `文件 "${file.name}" 下载成功`);
        } catch (error) {
          showStatus('error', `文件 "${file.name}" 下载失败`);
          console.error('Download error:', error);
        }
      } else {
        showStatus('error', '文件不存在或已损坏');
      }
    }
    
    // 删除文件
    function deleteFile(fileId) {
      const fileIndex = files.findIndex(f => f.id === fileId);
      
      if (fileIndex !== -1) {
        const fileName = files[fileIndex].name;
        files.splice(fileIndex, 1);
        
        // 保存到本地存储
        saveFilesToLocalStorage();
        
        // 更新文件列表
        renderFileList();
        
        showStatus('success', `文件 "${fileName}" 删除成功`);
      } else {
        showStatus('error', '文件不存在');
      }
    }
    
    // 显示清除确认模态框
    function showClearConfirmModal() {
      confirmModal.classList.add('active');
    }
    
    // 关闭清除确认模态框
    function closeConfirmModal() {
      confirmModal.classList.remove('active');
    }
    
    // 处理清除确认
    function handleClearConfirmation() {
      files = [];
      
      // 保存到本地存储
      saveFilesToLocalStorage();
      
      // 更新文件列表
      renderFileList();
      
      // 关闭模态框
      closeConfirmModal();
      
      showStatus('success', '所有文件已清除');
    }
    
    // 切换管理员模式
    function toggleAdminMode() {
      adminMode = !adminMode;
      
      if (adminMode) {
        adminModeToggle.innerHTML = '<i class="fa fa-user mr-1"></i> 普通模式';
        adminModeToggle.classList.add('bg-danger/20');
        adminModeToggle.classList.remove('bg-white/20');
      } else {
        adminModeToggle.innerHTML = '<i class="fa fa-user-circle mr-1"></i> 管理员模式';
        adminModeToggle.classList.remove('bg-danger/20');
        adminModeToggle.classList.add('bg-white/20');
      }
      
      // 更新文件列表
      renderFileList();
      
      // 显示状态消息
      showStatus('success', adminMode ? '已切换到管理员模式' : '已切换到普通模式');
    }
  </script>
</body>
</html>
